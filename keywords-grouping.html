<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
    <title>Keyword Grouping</title>
    <style>
        body {
            background-color: #f4f4f4;
            font-family: Arial, sans-serif;
        }

        .container {
            max-width: 800px;
        }

        .highlight {
            background-color: yellow;
        }

        .copy-btn {
            margin: 10px auto;
            display: inline-block;
        }

        .output, .summary {
            background-color: #fff;
            border: 1px solid #ddd;
            padding: 15px;
            margin-top: 20px;
            overflow-y: auto;
        }

        p {
            text-align: center;
            font-size: 1rem;
            margin-top: 20px;
        }

        .center-btn {
            text-align: center;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="container text-center">
        <h2 class="my-4">Keyword Grouping</h2>
        <div class="form-floating mb-4">
            <textarea class="form-control text-center" id="inputData" maxlength="5000" style="height: 100px;"></textarea>
            <label for="inputData">Input keywords here</label>
        </div>
        <div class="center-btn">
            <button class="btn btn-primary" id="processButton" onclick="processData()">Start Keyword Grouping</button>
        </div>
        <div class="output" id="outputSection" style="display: none;">
            <button class="copy-btn btn btn-success" onclick="copySection('outputArea', this)">Copy Output</button>
            <div id="outputArea"></div>
        </div>
        <div class="summary" id="summarySection" style="display: none;">
            <div>
                <h3>Common Topics</h3>
                <button class="copy-btn btn btn-warning" onclick="copySection('commonTopics', this)">Copy Common</button>
                <div id="commonTopics"></div>
            </div>
            <div class="mt-4">
                <h3>Unique Topics</h3>
                <button class="copy-btn btn btn-info" onclick="copySection('uniqueTopics', this)">Copy Unique</button>
                <div id="uniqueTopics"></div>
            </div>
        </div>
        <p>
            This tool is designed to assist bloggers in grouping keywords effectively. Feel free to share suggestions!
        </p>
    </div>

    <script>
        function processData() {
            const input = document.getElementById("inputData").value.trim();
            const outputArea = document.getElementById("outputArea");
            const outputSection = document.getElementById("outputSection");
            const processButton = document.getElementById("processButton");
            const summarySection = document.getElementById("summarySection");
            const commonTopics = document.getElementById("commonTopics");
            const uniqueTopics = document.getElementById("uniqueTopics");

            outputArea.innerHTML = ""; 
            outputSection.style.display = "none"; 
            summarySection.style.display = "none"; 

            if (!input) {
                alert("Please enter some data!");
                return;
            }

            const lines = input.split("\n").map(line => line.trim()).slice(0, 500);
            const wordCount = {}; 
            const seenCommonWords = new Set();
            const lineWiseCommonWords = [];

            lines.forEach(line => {
                const words = line.split(/\s+/);
                const lineWords = new Set();
                words.forEach(word => {
                    wordCount[word] = (wordCount[word] || 0) + 1;
                    lineWords.add(word);
                });

                const lineCommonWords = Array.from(lineWords).filter(
                    word => wordCount[word] > 1 && !seenCommonWords.has(word)
                );

                lineCommonWords.forEach(word => seenCommonWords.add(word));

                lineWiseCommonWords.push(lineCommonWords);
            });

            let outputHTML = "";
            let commonHTML = "";
            let uniqueHTML = "";

            lines.forEach((line, index) => {
                const highlightedWords = [];
                const uniqueWords = [];
                const highlightedLine = line
                    .split(/\s+/)
                    .map(word => {
                        if (wordCount[word] > 1) {
                            highlightedWords.push(word);
                            return `<span class="highlight">${word}</span>`;
                        } else {
                            uniqueWords.push(word);
                            return word;
                        }
                    })
                    .join(" ");

                outputHTML += `<div>${highlightedLine}</div>`;

                if (lineWiseCommonWords[index].length > 0) {
                    commonHTML += `<div class="line">${lineWiseCommonWords[index].join(" ")}</div>`;
                }

                if (uniqueWords.length > 0) {
                    uniqueHTML += `<div class="line">${uniqueWords.join(" ")}</div>`;
                }
            });

            outputArea.innerHTML = outputHTML;
            outputSection.style.display = "block";

            commonTopics.innerHTML = commonHTML;
            uniqueTopics.innerHTML = uniqueHTML;
            summarySection.style.display = "block";

            processButton.innerHTML = "Go Below!";
            setTimeout(() => {
                processButton.innerHTML = "Start Keyword Grouping";
            }, 4000);
        }

        function copySection(sectionId, button) {
            const section = document.getElementById(sectionId);
            const tempTextArea = document.createElement("textarea");
            tempTextArea.value = section.innerText;
            document.body.appendChild(tempTextArea);
            tempTextArea.select();
            document.execCommand("copy");
            document.body.removeChild(tempTextArea);

            button.innerHTML = "Copied!";
            setTimeout(() => {
                button.innerHTML = "Copy";
            }, 4000);
        } 
    </script>
</body>
</html>
